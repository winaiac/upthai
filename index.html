<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vinai Innovation Portal - Super App ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢</title>

    <!-- 1. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Tailwind CSS (‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 2. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ React ‡πÅ‡∏•‡∏∞ ReactDOM (‡∏ï‡∏±‡∏ß‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏≠‡∏û) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- 3. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Babel (‡πÅ‡∏õ‡∏•‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡πâ Browser ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Supabase (‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•) -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- 5. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ FontAwesome (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏™‡∏ß‡∏¢‡πÜ) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- ‡∏õ‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap');

        body {
            font-family: 'Sarabun', sans-serif;
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        // ‡∏î‡∏∂‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å React
        const { useState, useEffect } = React;

        // --- ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SUPABASE ---
        const SUPABASE_URL = "https://ldsysxczitmkxmukmwri.supabase.co";
        const SUPABASE_ANON_KEY = "sb_publishable_I2HEPgG2BbzK2gBtG3i0NQ_YFlzJfVo";

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á Table ‡πÉ‡∏ô Supabase ‡∏≠‡∏≤‡∏à‡∏à‡∏∞ Error ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÅ‡∏≠‡∏û‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á
        let supabase = null;
        try {
            supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        } catch (e) {
            console.warn("Supabase not initialized (script might be blocked or key invalid)");
        }

        // --- MOCK DATA (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á) ---
        const MOCK_AGRICULTURE = [
            { id: 1, name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏≠‡∏°‡∏°‡∏∞‡∏•‡∏¥", category: "plant", type: "‡∏Ç‡πâ‡∏≤‡∏ß", marketCap: 100000, currentSupply: 85000, price: 15, unit: "‡∏Å‡∏Å.", yield: 600, cost: 4500, costDetails: { "‡∏Ñ‡πà‡∏≤‡πÄ‡∏°‡∏•‡πá‡∏î‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå": 800, "‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πã‡∏¢/‡∏¢‡∏≤": 1500, "‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á": 1500, "‡∏≠‡∏∑‡πà‡∏ô‡πÜ": 700 }, demand: "High", demandDesc: "‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏õ‡∏µ" },
            { id: 5, name: "‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏°‡∏≠‡∏ô‡∏ó‡∏≠‡∏á", category: "plant", type: "‡∏ú‡∏•‡πÑ‡∏°‡πâ", marketCap: 50000, currentSupply: 45000, price: 140, unit: "‡∏Å‡∏Å.", yield: 1500, cost: 35000, costDetails: { "‡∏î‡∏π‡πÅ‡∏•": 8000, "‡∏õ‡∏∏‡πã‡∏¢": 12000, "‡∏ô‡πâ‡∏≥": 5000, "‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß": 10000 }, demand: "Very High", demandDesc: "‡∏à‡∏µ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏≠‡∏±‡πâ‡∏ô" },
            { id: 31, name: "‡∏õ‡∏•‡∏≤‡∏ô‡∏¥‡∏• (‡∏ö‡πà‡∏≠‡∏î‡∏¥‡∏ô)", category: "fish", type: "‡∏õ‡∏£‡∏∞‡∏°‡∏á", marketCap: 150000, currentSupply: 140000, price: 60, unit: "‡∏Å‡∏Å.", yield: 1500, cost: 40000, costDetails: { "‡∏•‡∏π‡∏Å‡∏õ‡∏•‡∏≤": 3000, "‡∏≠‡∏≤‡∏´‡∏≤‡∏£": 25000, "‡πÑ‡∏ü": 5000, "‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô": 7000 }, demand: "Very High", demandDesc: "‡∏õ‡∏•‡∏≤‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1" },
            { id: 21, name: "‡πÇ‡∏Ñ‡∏Ç‡∏∏‡∏ô (‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ç‡∏∏‡∏ô)", category: "animal", type: "‡∏õ‡∏®‡∏∏‡∏™‡∏±‡∏ï‡∏ß‡πå", marketCap: 20000, currentSupply: 12000, price: 95, unit: "‡∏Å‡∏Å.(‡∏ï‡∏±‡∏ß)", yield: 400, cost: 25000, costDetails: { "‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå": 15000, "‡∏≠‡∏≤‡∏´‡∏≤‡∏£": 8000, "‡∏¢‡∏≤": 1000, "‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô": 1000 }, demand: "High", demandDesc: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡∏≤‡∏î‡∏ï‡∏•‡∏≤‡∏î" }
        ];

        const MOCK_BUSINESSES = [
            { id: 101, name: "‡∏£‡πâ‡∏≤‡∏ô‡∏™‡∏•‡∏±‡∏î‡πÇ‡∏£‡∏•", tier: "‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏°‡∏∑‡πà‡∏ô", investment: 15000, profitMonth: 8000, trend: "Up", history: [{ y: 22, p: 70000 }, { y: 23, p: 85000 }, { y: 24, p: 96000 }], costBreakdown: { "‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö": 5000, "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå": 3000, "‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà": 2000 }, risk: "Low", desc: "‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û" },
            { id: 201, name: "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà Slow Bar", tier: "‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏™‡∏ô", investment: 150000, profitMonth: 30000, trend: "Up", history: [{ y: 22, p: 250000 }, { y: 23, p: 300000 }, { y: 24, p: 360000 }], costBreakdown: { "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ä‡∏á": 50000, "‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á": 50000, "‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤": 30000 }, risk: "Medium", desc: "‡πÄ‡∏à‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô" },
            { id: 306, name: "‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÇ‡∏ã‡∏•‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏•‡∏•‡πå", tier: "‡∏´‡∏•‡∏±‡∏Å‡∏•‡πâ‡∏≤‡∏ô", investment: 3500000, profitMonth: 100000, trend: "Very High", history: [{ y: 22, p: 800000 }, { y: 23, p: 1000000 }, { y: 24, p: 1200000 }], costBreakdown: { "‡πÅ‡∏ú‡∏á": 2500000, "‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á": 1000000 }, risk: "Low", desc: "‡∏Ç‡∏≤‡∏¢‡πÑ‡∏ü‡∏Ñ‡∏∑‡∏ô‡∏£‡∏±‡∏ê" },
        ];

        // --- Helper Component: Footer Credit ---
        const AppFooter = () => (
            <div className="mt-12 mb-20 text-center opacity-80">
                <div className="inline-block bg-white rounded-full px-4 py-1 mb-2 border border-gray-200 shadow-sm">
                    <span className="text-[10px] text-gray-500 font-bold uppercase tracking-wider">Super App ‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢ üáπüá≠</span>
                </div>
                <p className="text-xs text-gray-400">
                    ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ <i className="fa-solid fa-heart text-red-400"></i> ‡πÇ‡∏î‡∏¢ <span className="font-bold text-gray-500">‡∏ß‡∏¥‡∏ô‡∏±‡∏¢ ‡∏ú‡∏±‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</span>
                </p>
            </div>
        );

        // --- MAIN APP COMPONENT ---
        const VinaiInnovationPortal = () => {
            const [currentPage, setCurrentPage] = useState('home');
            const [user, setUser] = useState(null);
            const [loginModalOpen, setLoginModalOpen] = useState(false);

            // Data States
            const [agricultureData, setAgricultureData] = useState(MOCK_AGRICULTURE);
            const [businessData, setBusinessData] = useState(MOCK_BUSINESSES);
            const [marketPosts, setMarketPosts] = useState([
                { id: 1, user: "‡∏•‡∏∏‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå", type: "‡∏Ç‡∏≤‡∏¢", item: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏≠‡∏°‡∏°‡∏∞‡∏•‡∏¥ 105", desc: "‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏≠‡∏°‡∏°‡∏≤‡∏Å", price: "250 ‡∏ö./‡∏ñ‡∏±‡∏á", contact: { tel: "081-111-2222" }, likes: 5, comments: [], rating: 4.5 },
                { id: 2, user: "‡πÄ‡∏à‡πä‡πÅ‡∏î‡∏á", type: "‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠", item: "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏ß‡πâ‡∏≤", desc: "‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏≠‡∏±‡πâ‡∏ô ‡∏à‡πà‡∏≤‡∏¢‡∏™‡∏î", price: "‡∏ï‡∏≤‡∏°‡∏ï‡∏•‡∏≤‡∏î", contact: { tel: "089-999-8888" }, likes: 2, comments: [], rating: 0 }
            ]);
            const [loading, setLoading] = useState(false);

            // Fetch Data
            useEffect(() => {
                const fetchData = async () => {
                    if (!supabase) return;
                    setLoading(true);
                    try {
                        const { data: agri } = await supabase.from('agriculture_products').select('*');
                        if (agri && agri.length > 0) setAgricultureData(agri);

                        const { data: biz } = await supabase.from('sandbox_businesses').select('*');
                        if (biz && biz.length > 0) setBusinessData(biz);

                        const { data: posts } = await supabase.from('market_posts').select('*').order('created_at', { ascending: false });
                        if (posts && posts.length > 0) setMarketPosts(posts);
                    } catch (error) {
                        console.log("Using Mock Data (DB not ready)");
                    } finally {
                        setLoading(false);
                    }
                };
                fetchData();
            }, []);

            // Handlers
            const handleGlobalLogin = () => {
                setUser({ name: "‡∏ô‡∏±‡∏Å‡∏•‡πà‡∏≤‡∏ù‡∏±‡∏ô ‡πÅ‡∏´‡πà‡∏á‡∏ó‡∏∏‡πà‡∏á‡∏Å‡∏∏‡∏•‡∏≤", id: "U009", province: "‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î", role: "Member" });
                setLoginModalOpen(false);
            };

            const handlePostAd = async (newPost) => {
                if (!user) { setLoginModalOpen(true); return; }

                const postObj = {
                    id: Date.now(),
                    user: user.name,
                    ...newPost,
                    likes: 0, comments: [], rating: 0,
                    contact: { tel: newPost.tel, line: newPost.line, facebook: newPost.facebook },
                    created_at: new Date().toISOString()
                };
                setMarketPosts([postObj, ...marketPosts]);

                if (supabase) {
                    await supabase.from('market_posts').insert([{
                        user_name: user.name, type: newPost.type, item_name: newPost.item, description: newPost.desc, price: newPost.price,
                        contact_info: { tel: newPost.tel, line: newPost.line, facebook: newPost.facebook }, likes: 0
                    }]);
                }
            };

            // --- PAGE 1: HOME ---
            const HomePage = () => (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white p-6 pb-24">
                    <div className="max-w-4xl w-full text-center space-y-8 animate-fade-in-up">
                        <div className="bg-white/10 backdrop-blur-md p-8 rounded-3xl border border-white/20 shadow-2xl relative transition-all hover:bg-white/15">
                            {user && <div className="absolute top-4 right-4 bg-green-500 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1"><i className="fa-solid fa-user"></i> {user.name}</div>}
                            <div className="flex flex-col items-center">
                                <div className="w-32 h-32 bg-gradient-to-r from-blue-400 to-emerald-400 rounded-full flex items-center justify-center mb-6 shadow-lg border-4 border-white overflow-hidden relative group">
                                    {user ? <span className="text-5xl">üßë‚Äçüåæ</span> : <i className="fa-solid fa-seedling text-5xl text-white"></i>}
                                </div>

                                {user ? (
                                    <>
                                        <h1 className="text-3xl md:text-5xl font-bold mb-3 text-white">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ‡∏Ñ‡∏∏‡∏ì{user.name}</h1>
                                        <p className="text-lg text-emerald-200 mb-6 font-light">"‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏û‡∏∑‡∏ä‡∏ú‡∏•‡∏á‡∏≠‡∏Å‡∏á‡∏≤‡∏° ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏£‡πà‡∏≥‡∏£‡∏ß‡∏¢"</p>
                                    </>
                                ) : (
                                    <>
                                        <h1 className="text-3xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 to-emerald-200 leading-tight">
                                            "‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï<br />‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢"
                                        </h1>
                                        <p className="text-lg md:text-xl text-gray-200 mb-8 max-w-2xl font-light leading-relaxed">
                                            ‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á‡∏ä‡∏≤‡∏ß‡πÑ‡∏ó‡∏¢ <span className="text-yellow-300 font-bold">‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span><br class="hidden md:block" />
                                            ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏°‡∏µ‡∏Å‡∏¥‡∏ô ‡∏°‡∏µ‡πÉ‡∏ä‡πâ ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏µ‡πà <span className="font-bold text-white border-b-2 border-yellow-400">‡∏™‡∏∏‡∏Ç‡∏™‡∏ö‡∏≤‡∏¢</span> ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô
                                        </p>
                                    </>
                                )}

                                {!user && (
                                    <button onClick={() => setLoginModalOpen(true)} className="bg-orange-500 hover:bg-orange-600 text-white px-8 py-3 rounded-full font-bold shadow-lg animate-bounce transition-all transform hover:scale-105 flex items-center gap-2">
                                        <i className="fa-solid fa-right-to-bracket"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                                    </button>
                                )}
                            </div>
                        </div>

                        <div className="grid md:grid-cols-3 gap-6 mt-12">
                            <button onClick={() => setCurrentPage('kaset')} className="group relative overflow-hidden bg-gradient-to-br from-emerald-800 to-green-900 p-8 rounded-2xl hover:scale-105 transition-all duration-300 border border-emerald-500/30 shadow-xl text-left">
                                <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20"><i className="fa-solid fa-seedling text-9xl"></i></div>
                                <div className="relative z-10">
                                    <div className="bg-emerald-500/20 w-16 h-16 rounded-xl flex items-center justify-center mb-4"><i className="fa-solid fa-brain text-2xl text-emerald-300"></i></div>
                                    <h2 className="text-2xl font-bold text-white mb-2">Kaset Cloud</h2>
                                    <p className="text-gray-300 text-sm">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏∑‡∏ä/‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô/‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥</p>
                                </div>
                            </button>
                            <button onClick={() => setCurrentPage('market')} className="group relative overflow-hidden bg-gradient-to-br from-orange-800 to-red-900 p-8 rounded-2xl hover:scale-105 transition-all duration-300 border border-orange-500/30 shadow-xl text-left">
                                <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20"><i className="fa-solid fa-bullhorn text-9xl"></i></div>
                                <div className="relative z-10">
                                    <div className="bg-orange-500/20 w-16 h-16 rounded-xl flex items-center justify-center mb-4"><i className="fa-solid fa-arrow-trend-up text-2xl text-orange-300"></i></div>
                                    <h2 className="text-2xl font-bold text-white mb-2">‡∏ï‡∏•‡∏≤‡∏î & ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</h2>
                                    <p className="text-gray-300 text-sm">‡πÄ‡∏ä‡πá‡∏Ñ‡∏î‡∏µ‡∏°‡∏≤‡∏ô‡∏î‡πå‡∏ï‡∏•‡∏≤‡∏î ‡∏•‡∏á‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢ ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏†‡∏±‡∏¢‡∏°‡∏¥‡∏à‡∏â‡∏≤‡∏ä‡∏µ‡∏û</p>
                                </div>
                            </button>
                            <button onClick={() => setCurrentPage('sandbox')} className="group relative overflow-hidden bg-gradient-to-br from-indigo-800 to-blue-900 p-8 rounded-2xl hover:scale-105 transition-all duration-300 border border-indigo-500/30 shadow-xl text-left">
                                <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20"><i className="fa-solid fa-gamepad text-9xl"></i></div>
                                <div className="relative z-10">
                                    <div className="bg-indigo-500/20 w-16 h-16 rounded-xl flex items-center justify-center mb-4"><i className="fa-solid fa-chart-line text-2xl text-indigo-300"></i></div>
                                    <h2 className="text-2xl font-bold text-white mb-2">Sandbox</h2>
                                    <p className="text-gray-300 text-sm">‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏Å‡∏©‡∏ï‡∏£ ‡∏ù‡∏∂‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πä‡∏á‡πÉ‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡πÄ‡∏à‡πä‡∏á‡∏à‡∏£‡∏¥‡∏á</p>
                                </div>
                            </button>
                        </div>
                        <AppFooter />
                    </div>
                </div>
            );

            // --- PAGE 2: KASET CLOUD ---
            const KasetCloudApp = () => {
                const allProvinces = ["‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£", "‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô", "‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", "‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤", "‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï", "‡∏™‡∏á‡∏Ç‡∏•‡∏≤", "‡∏£‡∏∞‡∏¢‡∏≠‡∏á"];
                const [area, setArea] = useState(10);
                const [analyzing, setAnalyzing] = useState(false);
                const [rankedResults, setRankedResults] = useState(null);

                const analyzeData = () => {
                    setAnalyzing(true);
                    setTimeout(() => {
                        let results = agricultureData.map(item => ({
                            ...item, profit: (item.price * item.yield * area) - (item.cost * area), score: Math.random() * 100
                        }));
                        results.sort((a, b) => b.profit - a.profit);
                        setRankedResults(results.slice(0, 5));
                        setAnalyzing(false);
                    }, 1000);
                };

                return (
                    <div className="min-h-screen bg-green-50 text-gray-800 p-4 pb-20">
                        <div className="bg-white rounded-2xl p-6 shadow-md border-t-4 border-emerald-500 mb-6">
                            <h2 className="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2"><i className="fa-solid fa-calculator text-emerald-600"></i> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (Kaset Cloud)</h2>
                            <div className="grid md:grid-cols-2 gap-4">
                                <select className="w-full p-2 border rounded-lg">
                                    <option>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                                    {allProvinces.map(p => <option key={p}>{p}</option>)}
                                </select>
                                <input type="number" value={area} onChange={(e) => setArea(e.target.value)} className="w-full p-2 border rounded-lg" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏£‡πà" />
                            </div>
                            <button onClick={analyzeData} className="w-full mt-4 bg-emerald-600 text-white py-3 rounded-xl font-bold flex justify-center items-center gap-2">
                                {analyzing ? "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•..." : "‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"}
                            </button>
                        </div>
                        {rankedResults && (
                            <div className="space-y-3">
                                {rankedResults.map((item, idx) => (
                                    <div key={idx} className="bg-white p-4 rounded-xl shadow border-l-4 border-green-500 flex justify-between items-center">
                                        <div>
                                            <h4 className="font-bold text-lg">{item.name}</h4>
                                            <p className="text-sm text-gray-500">‡∏Å‡∏≥‡πÑ‡∏£‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå: <span className="text-green-600 font-bold">{item.profit.toLocaleString()} ‡∏ø</span></p>
                                        </div>
                                        <div className="text-right">
                                            <span className="text-xs bg-gray-100 px-2 py-1 rounded">{item.demandDesc}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                        <AppFooter />
                    </div>
                );
            };

            // --- PAGE 3: SANDBOX ---
            const VirtualSandboxApp = () => {
                const [tierFilter, setTierFilter] = useState("All");
                const [expandedBiz, setExpandedBiz] = useState(null);
                const filteredBiz = tierFilter === "All" ? businessData : businessData.filter(b => b.tier === tierFilter);

                return (
                    <div className="min-h-screen bg-slate-900 text-white p-4 pb-20">
                        <div className="flex gap-2 mb-6 overflow-x-auto">
                            {["All", "‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏°‡∏∑‡πà‡∏ô", "‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏™‡∏ô", "‡∏´‡∏•‡∏±‡∏Å‡∏•‡πâ‡∏≤‡∏ô"].map(tier => (
                                <button key={tier} onClick={() => setTierFilter(tier)} className={`px-4 py-2 rounded-full font-bold text-sm whitespace-nowrap ${tierFilter === tier ? 'bg-indigo-500' : 'bg-slate-800'}`}>{tier}</button>
                            ))}
                        </div>
                        <div className="grid md:grid-cols-2 gap-4">
                            {filteredBiz.map((biz) => (
                                <div key={biz.id} className="bg-slate-800 rounded-xl p-5 border border-slate-700 hover:border-indigo-500 cursor-pointer" onClick={() => setExpandedBiz(biz === expandedBiz ? null : biz)}>
                                    <div className="flex justify-between mb-3">
                                        <h3 className="font-bold text-lg text-indigo-300">{biz.name}</h3>
                                        <span className="text-green-400 font-bold">{biz.profitMonth.toLocaleString()}/‡∏î.</span>
                                    </div>
                                    <div className="grid grid-cols-2 gap-2 text-xs text-gray-400 mb-2">
                                        <p>‡∏•‡∏á‡∏ó‡∏∏‡∏ô: {biz.investment.toLocaleString()}</p>
                                        <p>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á: {biz.risk}</p>
                                    </div>
                                    {expandedBiz === biz && (
                                        <div className="mt-3 pt-3 border-t border-slate-700 animate-fade-in-up">
                                            <p className="text-xs text-gray-300 mb-2">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô: {JSON.stringify(biz.costBreakdown)}</p>
                                            {user && <button className="w-full bg-indigo-600 py-2 rounded font-bold text-xs mt-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ô‡∏µ‡πâ</button>}
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                        <AppFooter />
                    </div>
                );
            };

            // --- PAGE 4: MARKET ---
            const MarketCommunityPage = () => {
                const [postModalOpen, setPostModalOpen] = useState(false);
                const [newPost, setNewPost] = useState({ type: '‡∏Ç‡∏≤‡∏¢', item: '', desc: '', price: '', tel: '', line: '', facebook: '' });

                return (
                    <div className="min-h-screen bg-gray-50 text-gray-800 p-4 pb-20">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="font-bold text-gray-700">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ({marketPosts.length})</h3>
                            <button onClick={() => user ? setPostModalOpen(true) : setLoginModalOpen(true)} className="bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow flex items-center gap-2"><i className="fa-solid fa-bullhorn"></i> ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
                        </div>
                        <div className="space-y-4">
                            {marketPosts.map((post, idx) => (
                                <div key={idx} className="bg-white rounded-xl shadow-sm p-4 border border-gray-100">
                                    <div className="flex justify-between mb-2">
                                        <span className="font-bold text-gray-800">{post.item_name || post.item}</span>
                                        <span className={`text-xs px-2 py-1 rounded-full ${post.type === '‡∏Ç‡∏≤‡∏¢' ? 'bg-green-100 text-green-700' : 'bg-blue-100 text-blue-700'}`}>{post.type}</span>
                                    </div>
                                    <p className="text-sm text-gray-600 mb-2">{post.description || post.desc}</p>
                                    <p className="text-lg font-bold text-orange-600 mb-3">{post.price}</p>
                                    <div className="flex gap-4 text-gray-500 text-sm border-t pt-2">
                                        <button className="flex items-center gap-1 hover:text-blue-600"><i className="fa-solid fa-thumbs-up"></i> {post.likes || 0}</button>
                                        <button className="flex items-center gap-1 hover:text-blue-600"><i className="fa-solid fa-comment"></i> ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå</button>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <AppFooter />
                        {postModalOpen && (
                            <div className="fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4">
                                <div className="bg-white rounded-2xl p-6 w-full max-w-md">
                                    <h3 className="font-bold mb-4">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h3>
                                    <input className="border w-full p-2 mb-2 rounded" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" value={newPost.item} onChange={e => setNewPost({ ...newPost, item: e.target.value })} />
                                    <input className="border w-full p-2 mb-2 rounded" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" value={newPost.price} onChange={e => setNewPost({ ...newPost, price: e.target.value })} />
                                    <div className="flex gap-2 mt-4">
                                        <button onClick={() => setPostModalOpen(false)} className="flex-1 border py-2 rounded">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                        <button onClick={() => { handlePostAd(newPost); setPostModalOpen(false); }} className="flex-1 bg-orange-600 text-white py-2 rounded font-bold">‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            };

            // --- NAVIGATION ---
            return (
                <div className="font-sans">
                    <nav className="fixed bottom-0 w-full bg-white border-t flex justify-around p-3 z-50 text-xs font-bold text-gray-500 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]">
                        <button onClick={() => setCurrentPage('home')} className={`flex flex-col items-center gap-1 ${currentPage === 'home' ? 'text-emerald-600' : ''}`}><i className="fa-solid fa-house text-lg"></i><span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span></button>
                        <button onClick={() => setCurrentPage('kaset')} className={`flex flex-col items-center gap-1 ${currentPage === 'kaset' ? 'text-emerald-600' : ''}`}><i className="fa-solid fa-seedling text-lg"></i><span>‡πÄ‡∏Å‡∏©‡∏ï‡∏£</span></button>
                        <button onClick={() => setCurrentPage('market')} className={`flex flex-col items-center gap-1 ${currentPage === 'market' ? 'text-orange-600' : ''}`}><i className="fa-solid fa-shop text-lg"></i><span>‡∏ï‡∏•‡∏≤‡∏î</span></button>
                        <button onClick={() => setCurrentPage('sandbox')} className={`flex flex-col items-center gap-1 ${currentPage === 'sandbox' ? 'text-indigo-600' : ''}`}><i className="fa-solid fa-gamepad text-lg"></i><span>Sandbox</span></button>
                    </nav>

                    {currentPage === 'home' && <HomePage />}
                    {currentPage === 'kaset' && <KasetCloudApp />}
                    {currentPage === 'market' && <MarketCommunityPage />}
                    {currentPage === 'sandbox' && <VirtualSandboxApp />}

                    {loginModalOpen && (
                        <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-[60] p-4 backdrop-blur-sm">
                            <div className="bg-white rounded-2xl p-8 w-full max-w-sm text-center shadow-2xl relative">
                                <button onClick={() => setLoginModalOpen(false)} className="absolute top-4 right-4 text-gray-400 font-bold hover:text-gray-600">X</button>
                                <h3 className="text-2xl font-bold mb-4 text-gray-800">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
                                <button onClick={handleGlobalLogin} className="w-full bg-blue-600 text-white py-3 rounded-xl font-bold mb-2 flex justify-center items-center gap-2 hover:bg-blue-700 transition"><i className="fa-brands fa-facebook"></i> Facebook</button>
                                <button onClick={handleGlobalLogin} className="w-full bg-green-500 text-white py-3 rounded-xl font-bold flex justify-center items-center gap-2 hover:bg-green-600 transition"><i className="fa-brands fa-line"></i> Line</button>
                                <div className="mt-4 text-xs text-gray-400">
                                    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</p>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<VinaiInnovationPortal />);
    </script>
</body>

</html>